@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  /* Design tokens - WCAG AA compliant */
  --bg: #FAF8F3;
  --surface: #FFFFFF;
  --text: #111111;
  --muted: #6B7280;
  --accent: #FFC857;
  --accent2: #6C63FF;
  --border: #E7E2D9;
  
  /* Legacy support */
  --color-bg-light: var(--bg);
  --color-bg-dark: #1a1a1a;
  --color-bg: var(--bg);
  --color-bg-muted: #F5F5F0;
  --color-fg: var(--text);
  --color-fg-muted: var(--muted);
  --color-accent-yellow: var(--accent);
  --color-accent-purple: var(--accent2);
  --color-accent-red: #F87171;
  --color-accent: var(--accent);
  --color-card: var(--surface);
  --color-card-border: var(--border);
  
  /* Radii */
  --radius-sm: 8px;
  --radius-md: 12px;
  --radius-lg: 16px;
  
  /* Shadows */
  --shadow-sm: 0 4px 12px rgba(0, 0, 0, 0.08);
  --shadow-md: 0 10px 24px rgba(0, 0, 0, 0.12);
  
  /* Z-index */
  --z-header: 100;
  --z-modal: 1000;
}

* {
  box-sizing: border-box;
  padding: 0;
  margin: 0;
}

html {
  scroll-behavior: smooth;
}

body {
  color: var(--color-fg);
  background: var(--color-bg);
  min-height: 100vh;
  font-feature-settings: 'kern' 1, 'liga' 1;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  user-select: text;
  cursor: default;
  /* iOS animation performance */
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
  -webkit-perspective: 1000;
  perspective: 1000;
}

/* Ensure proper cursor behavior */
a, button, [role="button"] {
  cursor: pointer;
}

input, textarea, select {
  cursor: text;
}

/* Prevent edit cursor and focus on non-editable elements */
h1, h2, h3, h4, h5, h6, p, span, div, li, section, article {
  cursor: default;
  user-select: text;
  -webkit-user-select: text;
  -moz-user-select: text;
  -ms-user-select: text;
}

/* Remove focus outline and caret from non-interactive elements */
h1:focus, h2:focus, h3:focus, h4:focus, h5:focus, h6:focus, 
p:focus, span:focus, div:focus, li:focus, section:focus {
  outline: none;
  caret-color: transparent;
}

/* Only show text cursor on hover for selection */
h1:hover, h2:hover, h3:hover, h4:hover, h5:hover, h6:hover, p:hover {
  cursor: text;
}

/* Prevent caret from appearing on click */
*:not(input):not(textarea):not([contenteditable="true"]) {
  caret-color: transparent;
}

/* Focus styles */
*:focus-visible {
  outline: 2px solid var(--accent2);
  outline-offset: 2px;
}

/* Hover darken 6-8% */
button:hover:not(:disabled),
a:hover:not(:disabled) {
  filter: brightness(0.93);
  transition: filter 120ms ease;
}

/* Skip to content link - visually hidden until focus */
.skip-link {
  position: absolute;
  top: -40px;
  left: 0;
  background: var(--accent2);
  color: var(--surface);
  padding: 8px 16px;
  text-decoration: none;
  z-index: calc(var(--z-modal) + 1);
  border-radius: var(--radius-sm);
  clip: rect(0 0 0 0);
  clip-path: inset(50%);
  width: 1px;
  height: 1px;
  overflow: hidden;
  white-space: nowrap;
}

.skip-link:focus {
  top: 0;
  clip: auto;
  clip-path: none;
  width: auto;
  height: auto;
  overflow: visible;
}

@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
  }
  
  /* Reduce motion for reveals */
  [data-reveal] {
    opacity: 1 !important;
    transform: none !important;
  }
}

@layer utilities {
  .text-balance {
    text-wrap: balance;
  }
}

/* iOS animation performance optimizations */
[data-framer-component],
[motion] {
  will-change: transform, opacity;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
}

/* Optimize framer-motion animations for iOS */
[data-framer-name] {
  will-change: transform, opacity;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

/* 3D Card Hover Effects */
.card-3d-hover {
  transition: transform 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94), box-shadow 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  transform-style: preserve-3d;
}

.card-3d-hover:hover {
  transform: perspective(1000px) rotateY(var(--rotate-y, 0)) rotateX(var(--rotate-x, 0)) scale3d(1.03, 1.03, 1.03);
  box-shadow: 0 12px 40px rgba(0, 0, 0, 0.15);
}

/* Disable 3D on mobile for better performance */
@media (max-width: 768px) {
  .card-3d-hover {
    transform: none !important;
    transition: box-shadow 0.3s ease !important;
  }
  
  .card-3d-hover:hover {
    transform: none !important;
    box-shadow: 0 8px 25px rgba(0, 0, 0, 0.12) !important;
  }
}

/* Glow on hover effects */
.glow-on-hover {
  transition: filter 0.3s ease-in-out;
}

.glow-on-hover:hover {
  filter: drop-shadow(0 0 10px rgba(255, 200, 87, 0.5));
}

/* Animated gradient backgrounds */
.animated-gradient-bg {
  background-image:
    url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23E7E2D9' fill-opacity='0.12'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E"),
    linear-gradient(300deg, #FAF8F3 0%, #F5F5F0 30%, #E7E2D9 60%, #D4CFC4 100%);
  background-size: 60px 60px, 200% 200%;
  background-position: center center;
  background-repeat: repeat, no-repeat;
  animation: gradient-animation 12s ease-in-out infinite;
}

/* Mobile optimizations for background */
@media (max-width: 768px) {
  .animated-gradient-bg {
    background-size: 60px 60px, 180% 180%;
    background-position: center center;
    background-attachment: scroll;
    animation: gradient-animation-mobile 15s ease-in-out infinite;
    will-change: background-position;
  }
}

@keyframes gradient-animation {
  0% { background-position: 0% 50%; }
  25% { background-position: 50% 25%; }
  50% { background-position: 100% 50%; }
  75% { background-position: 50% 75%; }
  100% { background-position: 0% 50%; }
}

@keyframes gradient-animation-mobile {
  0% { background-position: 0% 50%; }
  20% { background-position: 30% 30%; }
  40% { background-position: 70% 20%; }
  60% { background-position: 100% 50%; }
  80% { background-position: 70% 80%; }
  100% { background-position: 0% 50%; }
}

/* Reduce motion for gradient animations */
@media (prefers-reduced-motion: reduce) {
  .animated-gradient-bg {
    animation: none;
    background-position: center center;
  }
}

/* Cross-platform compatibility fixes */
/* Fix for iOS Safari viewport units */
@supports (-webkit-touch-callout: none) {
  .min-h-screen {
    min-height: -webkit-fill-available;
  }
}

/* Ensure proper touch targets on mobile */
@media (pointer: coarse) {
  button,
  [role="button"],
  input[type="submit"],
  input[type="button"],
  a[role="button"] {
    min-height: 44px;
    min-width: 44px;
  }
}

/* Hardware acceleration for better performance */
.navbar-gradual {
  will-change: background, backdrop-filter;
  transform: translateZ(0);
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

/* Mobile menu optimizations */
@media (max-width: 768px) {
  .navbar-gradual {
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
  }
}

/* Print stylesheet */
@media print {
  /* Hide header, footer, and navigation */
  nav,
  footer,
  .skip-link {
    display: none !important;
  }

  /* Ensure PDF fits A4 */
  @page {
    size: A4;
    margin: 0;
  }

  body {
    background: white;
    color: black;
  }

  /* Show only PDF content */
  main {
    padding: 0 !important;
    margin: 0 !important;
  }

  /* Hide buttons and controls */
  button,
  a[href^="#"],
  .no-print {
    display: none !important;
  }

  /* Ensure PDF viewer prints */
  iframe,
  embed,
  object {
    width: 100% !important;
    height: 100vh !important;
    border: none !important;
  }
}

